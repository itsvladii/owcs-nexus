---
interface Props {
  title: string;
  subtitle: string;
  description: string;
  // Add 'worldcup' and 'purple' to the allowed list
  theme: 'amber' | 'blue' | 'emerald' | 'cyan' | 'purple' | 'worldcup'; 
  align?: 'left' | 'right'; 
  primaryLink?: { text: string; href: string };
  secondaryLink?: { text: string; href: string };
}

// 1. DESTRUCTURE PROPS (This defines 'theme')
const { 
  title, 
  subtitle, 
  description, 
  theme = 'blue', 
  align = 'left',
  primaryLink,
  secondaryLink 
} = Astro.props;

// 2. DEFINE THEME MAP
const themeMap = {
  amber: {
    accent: 'text-amber-500',
    glow: 'bg-amber-500/5',
    button: 'bg-amber-500 hover:bg-amber-400 text-black shadow-amber-500/20',
    border: 'border-amber-500/30',
    subtle: 'text-amber-100/60',
    line: 'bg-amber-500'
  },
  blue: {
    accent: 'text-blue-400',
    glow: 'bg-blue-600/10',
    button: 'bg-white hover:bg-blue-50 text-blue-950 shadow-blue-500/20',
    border: 'border-blue-900/30',
    subtle: 'text-blue-100/60',
    line: 'bg-blue-400'
  },
  purple: {
    accent: 'text-purple-400',
    glow: 'bg-purple-600/10',
    button: 'bg-white hover:bg-purple-50 text-purple-950 shadow-purple-500/20',
    border: 'border-purple-900/30',
    subtle: 'text-purple-100/60',
    line: 'bg-purple-400'
  },
  emerald: {
    accent: 'text-emerald-400',
    glow: 'bg-emerald-500/5',
    button: 'bg-white hover:bg-emerald-50 text-emerald-950 shadow-emerald-500/20',
    border: 'border-emerald-900/30',
    subtle: 'text-emerald-100/60',
    line: 'bg-emerald-400'
  },
  cyan: {
     accent: 'text-cyan-400',
     glow: 'bg-cyan-500/5',
     button: 'bg-white hover:bg-cyan-50 text-cyan-950 shadow-cyan-500/20',
     border: 'border-cyan-500/30',
     subtle: 'text-cyan-100/60',
     line: 'bg-cyan-400'
  },
  // OFFICIAL WORLD CUP THEME (Orange/Slate)
  worldcup: {
    accent: 'text-[#F05A14]', // Official Orange
    glow: 'bg-[#F05A14]/5',
    button: 'bg-[#F05A14] hover:bg-[#d64d0e] text-white shadow-[#F05A14]/20',
    border: 'border-[#333E48]', // Official Dark Grey
    subtle: 'text-gray-400',
    line: 'bg-[#F05A14]'
  }
};

// 3. GET COLORS (Now 'theme' is definitely defined)
const colors = themeMap[theme] || themeMap['blue']; // Fallback
const isRight = align === 'right';
---

<section class="py-24 relative overflow-hidden border-b border-neutral-900 bg-neutral-950">
  
  {/* Ambient Glow */}
  <div 
    class={`absolute w-[800px] h-[800px] rounded-full blur-[120px] pointer-events-none ${colors.glow}`}
    style={{ 
      top: isRight ? '50%' : '0', 
      left: isRight ? '0' : 'auto', 
      right: isRight ? 'auto' : '0',
      transform: 'translate(-20%, -20%)'
    }}
  ></div>

  <div class="max-w-7xl mx-auto px-6 md:px-12 relative z-10">
    <div class={`grid grid-cols-1 lg:grid-cols-2 gap-16 items-center ${isRight ? 'lg:grid-flow-dense' : ''}`}>
      
      {/* TEXT COLUMN */}
      <div class={`${isRight ? 'lg:col-start-2' : ''}`}>
        <h2 class={`${colors.accent} font-bold tracking-widest uppercase mb-4 text-sm flex items-center gap-2`}>
            <span class={`w-8 h-px ${colors.line}`}></span> {subtitle}
        </h2>
        <h3 class="text-5xl md:text-6xl font-title text-white mb-6 leading-none drop-shadow-lg">
           {title}
        </h3>
        <p class="text-neutral-400 text-lg mb-10 leading-relaxed max-w-xl">
          {description}
        </p>
        
        <div class="flex flex-wrap gap-4">
            {primaryLink && (
              <a 
                href={primaryLink.href} 
                class={`inline-flex items-center gap-3 px-8 py-4 font-black font-title text-xl rounded transition-transform hover:translate-x-1 shadow-lg ${colors.button}`}
              >
                {primaryLink.text} <span>â†’</span>
              </a>
            )}
            {secondaryLink && (
               <a 
                 href={secondaryLink.href} 
                 class={`inline-flex items-center gap-2 px-8 py-4 border-2 bg-transparent font-bold font-title text-xl rounded transition-colors ${colors.border} hover:border-white text-white`}
               >
                  {secondaryLink.text}
               </a>
            )}
        </div>
      </div>

      {/* VISUAL COLUMN (Slot for Image/Widget) */}
      <div class={`${isRight ? 'lg:col-start-1' : ''}`}>
         <slot />
      </div>

    </div>
  </div>
</section>